<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Painel Individual Incobel</title>
  <style>
    body {
      margin: 0;
      background: linear-gradient(to bottom, #001f3f, #000000);
      color: white;
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 2rem;
    }
    h1 {
      font-size: 1.8rem;
      margin-bottom: 1rem;
    }
    input {
      padding: 0.6rem;
      font-size: 1rem;
      border-radius: 5px;
      border: none;
      width: 250px;
      text-align: center;
    }
    button {
      margin-top: 1rem;
      padding: 0.6rem 2rem;
      font-size: 1rem;
      border: none;
      border-radius: 5px;
      background-color: #004080;
      color: white;
      cursor: pointer;
    }
    iframe {
      margin-top: 2rem;
      width: 100%;
      height: 85vh;
      border: none;
      display: none;
    }
  </style>
</head>
<body>
  <h1>Painel Individual Incobel</h1>
  <p>Digite seu CPF (com pontos e hífen):</p>
  <input type="text" id="cpfInput" placeholder="000.000.000-00" maxlength="14"/>
  <br />
  <button onclick="acessarPainel()">Entrar</button>

  <iframe id="painelIframe" allowfullscreen="true"></iframe>

  <script>
    const cpfsPermitidos = [
      "011.938.299-76",
      "020.586.869-00",
      "005.275.259-36",
      "005.159.019-03",
      "418.560.820-91",
      "770.495.359-15",
      "078.861.819-99",
      "048.381.969-70",
      "076.397.099-97",
      "386.597.609-30"
    ];

    function acessarPainel() {
      const cpf = document.getElementById("cpfInput").value.trim();
      const cpfRegex = /^\d{3}\.\d{3}\.\d{3}-\d{2}$/;

      if (!cpfRegex.test(cpf)) {
        alert("CPF inválido. Use o formato 000.000.000-00");
        return;
      }

      if (!cpfsPermitidos.includes(cpf)) {
        alert("CPF não autorizado.");
        return;
      }

      const reportURL = "https://app.powerbi.com/view?r=eyJrIjoiOTRkMzViNWYtNzE3Yi00NWIyLThmNzYtMmUzYzRjODFhY2UwIiwidCI6IjY1OTgyMmNmLTczNDktNGU5OC05OGNlLWE3ZjI5ODMzYjVjNiJ9";

      const filtro = encodeURIComponent(`{"$filter":"Planilha1/CPF eq '${cpf}'"}`);
      const urlComFiltro = `${reportURL}&filter=${filtro}&pageName=ReportSection4`;

      const iframe = document.getElementById("painelIframe");
      iframe.src = urlComFiltro;
      iframe.style.display = "block";
    }
  </script>
</body>
</html>
